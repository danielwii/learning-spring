/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.3/userguide/tutorial_java_projects.html
 */
buildscript {
    ext {
        propdepsVerision = "0.0.9.RELEASE"
    }
    repositories {
        mavenLocal()
        maven { url "http://maven.aliyun.com/nexus/content/groups/public" }
        maven { url "https://maven-central.storage.googleapis.com" }
        maven { url "http://repo.spring.io/plugins-release" }
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath "io.spring.gradle:propdeps-plugin:${propdepsVerision}"
    }
}

plugins {
    id 'com.github.ben-manes.versions' version '0.17.0'
    id "io.spring.dependency-management" version "1.0.3.RELEASE"
    id "org.springframework.boot" version "1.5.8.RELEASE"
//    id 'io.spring.gradle:propdeps-plugin' version '0.0.9.RELEASE'
}

allprojects {
    group 'io.github.danielwii'
    version '1.0-SNAPSHOT'
}

subprojects {
    repositories {
        mavenLocal()
        maven { url "http://maven.aliyun.com/nexus/content/groups/public" }
        maven { url "https://maven-central.storage.googleapis.com" }
        maven { url "http://clojars.org/repo" }
        mavenCentral()
    }

    apply plugin: "java"
    apply plugin: "idea"
//    apply plugin: "com.github.ben-manes.versions"
    apply plugin: "org.springframework.boot"
    apply plugin: "propdeps"
    apply plugin: "propdeps-idea"
//    apply plugin: "io.spring.dependency-management"

//    dependencyManagement {
//        imports {
//            mavenBom "org.springframework.boot:spring-boot-starter-parent:1.5.8.RELEASE"
////            mavenBom "org.springframework.cloud:spring-cloud-dependencies:Camden.SR5"
//        }
//    }

    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8

    dependencies {
        compileOnly "org.projectlombok:lombok:1.16.18"

        testCompile "org.springframework.boot:spring-boot-starter-test"
        testCompile "org.codehaus.groovy:groovy-all:2.4.9"
        // https://mvnrepository.com/artifact/org.spockframework/spock-core
        testCompile "org.spockframework:spock-core:1.1-groovy-2.4"
        // https://mvnrepository.com/artifact/org.spockframework/spock-spring
        testCompile "org.spockframework:spock-spring:1.1-groovy-2.4"

        // propdeps
        optional("org.springframework.boot:spring-boot-configuration-processor") {
            exclude group: "com.vaadin.external.google"
        }
    }

    compileJava.dependsOn(processResources)
}